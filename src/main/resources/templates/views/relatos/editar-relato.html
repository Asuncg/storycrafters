<link rel="stylesheet" href="/css/relatos.css">
<!-- Contenido principal -->
<div class="container text-center">
    <div class="row justify-content-sm-center">
        <div class="col-sm-10 position-fixed editor-bar">
            <div class="row justify-content-sm-center">
                <div class="col-sm-auto">
                    <button type="button" class="btn btn-primary" onclick="guardarRelato()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-floppy" viewBox="0 0 16 16">
                            <path d="M11 2H9v3h2z"></path>
                            <path d="M1.5 0h11.586a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5v-13A1.5 1.5 0 0 1 1.5 0M1 1.5v13a.5.5 0 0 0 .5.5H2v-4.5A1.5 1.5 0 0 1 3.5 9h9a1.5 1.5 0 0 1 1.5 1.5V15h.5a.5.5 0 0 0 .5-.5V2.914a.5.5 0 0 0-.146-.353l-1.415-1.415A.5.5 0 0 0 13.086 1H13v4.5A1.5 1.5 0 0 1 11.5 7h-7A1.5 1.5 0 0 1 3 5.5V1H1.5a.5.5 0 0 0-.5.5m3 4a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V1H4zM3 15h10v-4.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5z"></path>
                        </svg>
                    </button>
                    <button type="button" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-eye" viewBox="0 0 16 16">
                            <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"></path>
                            <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"></path>
                        </svg>
                    </button>
                    <button type="button" class="btn btn-primary" onclick="negritaTexto()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                             class="bi bi-type-bold" viewBox="0 0 16 16">
                            <path d="M8.21 13c2.106 0 3.412-1.087 3.412-2.823 0-1.306-.984-2.283-2.324-2.386v-.055a2.176 2.176 0 0 0 1.852-2.14c0-1.51-1.162-2.46-3.014-2.46H3.843V13zM5.908 4.674h1.696c.963 0 1.517.451 1.517 1.244 0 .834-.629 1.32-1.73 1.32H5.908V4.673zm0 6.788V8.598h1.73c1.217 0 1.88.492 1.88 1.415 0 .943-.643 1.449-1.832 1.449H5.907z">
                            </path>
                        </svg>
                    </button>
                    <button type="button" class="btn btn-primary" onclick="cursivaTexto()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-type-italic" viewBox="0 0 16 16">
                            <path d="M7.991 11.674 9.53 4.455c.123-.595.246-.71 1.347-.807l.11-.52H7.211l-.11.52c1.06.096 1.128.212 1.005.807L6.57 11.674c-.123.595-.246.71-1.346.806l-.11.52h3.774l.11-.52c-1.06-.095-1.129-.211-1.006-.806z">
                            </path>
                        </svg>
                    </button>
                    <button type="button" class="btn btn-primary" onclick="justificarTexto('left')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-text-left" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                  d="M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5m0-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5"></path>
                        </svg>
                    </button>
                    <button type="button" class="btn btn-primary" onclick="justificarTexto('center')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-text-center" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                  d="M4 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5m2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5"></path>
                        </svg>
                    </button>
                    <button type="button" class="btn btn-primary" onclick="justificarTexto('right')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-text-right" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                  d="M6 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5m4-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5"></path>
                        </svg>
                    </button>
                </div>
                <div class="col-sm-1 align-content-center">
                    <div class="btn-group text-white" id="caracteres"><span id="caracteres-escritos">0</span>/4000</div>
                </div>
            </div>
        </div>
    </div>
    <div class="row justify-content-md-center categorias">
        <th:block th:each="categoria : ${categorias}">
            <div class="form-check form-check-inline m-2">
                <input class="form-check-input" type="checkbox" th:id="${'categoria' + categoria.id}" name="categorias"
                       th:value="${categoria.id}" th:checked="${relato.categorias.contains(categoria)}">
                <label class="form-check-label" th:for="${'categoria' + categoria.id}"
                       th:text="${categoria.nombre}"></label>
            </div>
        </th:block>

    </div>
    <div class="row justify-content-md-center">
        <div class="col-md-10">
            <div class="editor-text">
                <div class="col-md-12 justify-content-center align-items-center text-uppercase fondo-relato" contenteditable="true"
                     th:style="'background-image: url(' + ${relato.imagen.url} + '); opacity: 0.75;'"
                     placeholder="Título del relato">
                    <div class="floating-title" id="titulo-relato" contenteditable="true" th:utext="${relato.titulo}">Escribe tu título aquí</div>
                </div>
                    <div class="col-md-12" contenteditable="true" id="texto-relato" th:utext="${relato.texto}"></div>
            </div>
            <div class="row" id="info-relato">
                <div class="col-md-auto" id="firma-autor">Firma de Autor: <span id="firma-relato"
                        th:text="${firma}"></span></div>
            </div>
            <input type="hidden" id="idImagen" th:value="${relato.imagen.id}">
            <input type="hidden" id="idRelato" th:value="${relato.id}">
        </div>
    </div>
    <!-- Modal de éxito -->
    <div class="modal fade" id="modalExito" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    El relato se ha guardado correctamente.
                </div>
            </div>
        </div>
    </div>
    <!-- Modal de error -->
    <div class="modal fade" id="modalError" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    Ha ocurrido un error al guardar el relato. Por favor, inténtalo de nuevo.
                </div>
            </div>
        </div>
    </div>
</div>
